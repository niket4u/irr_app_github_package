<copied full code from canvas goes here>